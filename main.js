(()=>{"use strict";class t{constructor(t,e,n,o){this.now=t,this.forecast=e,this.selectedUnit=n,this.time=o}renderToday(){const t=document.createElement("div"),e=document.createElement("h2"),n=document.createElement("img"),o=document.createElement("h3"),i=document.createElement("p");return t.classList.add("current-card"),t.appendChild(e),t.appendChild(n),t.appendChild(o),t.appendChild(i),e.textContent=this.time,n.src=this.now.icon,o.textContent=this.now.condition,i.textContent="farenheit"===this.selectedUnit?this.now.farenheit:this.now.celsius,t}renderFuture(){let t=[];return this.forecast.forEach((e=>{let n=function(t,e,n,o,i,c,a,r){const d=document.createElement("div"),s=document.createElement("h2"),l=document.createElement("img"),u=document.createElement("h3"),m=document.createElement("p"),h=document.createElement("p");return d.classList.add("current-card"),d.appendChild(s),d.appendChild(l),d.appendChild(u),d.appendChild(m),d.appendChild(h),s.textContent=t,l.src=e,u.textContent=n,m.textContent="farenheit"===r?c:o,h.textContent="farenheit"===r?a:i,d}(e.date,e.icon,e.condition,e.maxCelsius,e.minCelsius,e.maxFarenheit,e.minFarenheit,this.selectedUnit);t.push(n)})),t}}async function e(n,o){let i;const c=document.querySelector(".root-div");c.appendChild(function(){const t=document.createElement("div"),e=document.createElement("h3"),n=document.createElement("div");return t.setAttribute("id","loading-screen"),n.style.borderRadius="50%",n.style.border="10px solid grey",n.style.borderTop="10px solid black",n.style.borderBottom="10px solid black",n.animate([{transform:"rotate(0)"},{transform:"rotate(360deg)"}]),e.textContent="Loading...",t.style.width="100vw",t.style.height="100vh",t.style.backgroundColor="#cccccc80",t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.display="flex",t.style.flexDirection="column",t.style.alignItems="center",t.style.transition="300ms",t.appendChild(n),t.appendChild(e),t}());try{if(document.getElementById("loading-screen").style.opacity="100%",i=await async function(t,e){let n,o={location:{},now:{},forecast:[]};return await async function(t,e){try{let o=await fetch(`http://api.weatherapi.com/v1/forecast.json?key=${e}&q=${t}&days=3`);if(!o.ok)throw new Error(`Server error ${o.status}: ${o.statusText}`);n=await o.json()}catch(t){console.log(t.message),o.error=t.message;let e=document.createElement("span");e.classList.add("error"),e.textContent=t.message,document.querySelector(".location-input").appendChild(e)}}(t,"b58c63519071410d91613011243003"),o.location.country=n.location.country,o.location.region=n.location.region,o.location.city=n.location.name,o.location.time=n.location.localtime,o.now.celsius=n.current.temp_c,o.now.farenheit=n.current.temp_f,o.now.icon=n.current.condition.icon,o.now.condition=n.current.condition.text,n.forecast.forecastday.forEach((t=>{o.forecast.push({date:t.date,maxCelsius:t.day.maxtemp_c,minCelsius:t.day.mintemp_c,maxFarenheit:t.day.maxtemp_f,minFarenheit:t.day.mintemp_f,condition:t.day.condition.text,icon:t.day.condition.icon})})),o}(n),i.error)throw new Error(i.error);document.getElementById("loading-screen").style.opacity="0"}catch(t){console.error("Error fetching weather: "+t)}const a=new t(i.now,i.forecast,o,i.location.time),r=a.renderFuture(),d=document.createElement("h2"),s=document.createElement("div"),l=document.createElement("div"),u=document.createElement("label"),m=document.createElement("input"),h=document.createElement("button"),p=document.createElement("div"),y=document.createElement("button"),C=document.createElement("button");u.setAttribute("for","location-input"),m.setAttribute("id","location-input"),m.setAttribute("type","text"),m.setAttribute("placeholder","Enter City, Zip, etc."),h.setAttribute("value","Search"),h.classList.add("submit-btn"),h.classList.add("btn"),p.setAttribute("id","temp-swtch"),y.setAttribute("id","celsius-switch"),y.setAttribute("value","celsius"),y.classList.add("temp-switch"),C.setAttribute("id","farenheit-switch"),C.setAttribute("value","farenheit"),C.classList.add("temp-switch"),h.addEventListener("click",(()=>{m.value?e(m.value,o):m.setAttribute("placeholder","Enter a location!")})),l.appendChild(u),l.appendChild(m),l.appendChild(h),l.classList.add("location-input"),p.appendChild(y),p.appendChild(C),p.childNodes.forEach((t=>{t.addEventListener("click",(t=>{e(n,t.target.value)}))})),d.textContent=`${i.location.city}, ${i.location.country}`,u.textContent="Change Location:",y.textContent="C°",C.textContent="F°",h.textContent="Search",s.appendChild(l),s.appendChild(p),c.innerHTML="",c.appendChild(s),c.appendChild(d),c.appendChild(a.renderToday()),r.forEach((t=>c.appendChild(t)))}document.querySelector(".root-div"),async function(){const t=await async function(){return(async()=>{try{let t=await new Promise(((t,e)=>navigator.geolocation.getCurrentPosition(t,e)));return{latitude:t.coords.latitude,longitude:t.coords.longitude}}catch(t){console.log(t.message)}})()}();e(`${t.latitude},${t.longitude}`,"celsius")}()})();